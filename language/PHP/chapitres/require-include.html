<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>PHP - Include et Require</title>
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
    <header>
        <h1>Include et Require en PHP</h1>
        <p>Organiser son code en plusieurs fichiers</p>
    </header>

    <main>
        <section>
            <h2>Introduction</h2>
            <p>Les directives <code>include</code> et <code>require</code> permettent d'inclure un fichier PHP dans un autre, ce qui est essentiel pour :</p>
            <ul>
                <li>Éviter la répétition de code</li>
                <li>Organiser son projet en modules</li>
                <li>Séparer la logique de l'affichage</li>
                <li>Faciliter la maintenance</li>
            </ul>
        </section>

        <section>
            <h2>Différences entre include et require</h2>
            
            <article>
                <h3>Include</h3>
                <pre>
// Tentative d'inclusion - continue même si échec
include 'fonctions.php';

// Utilisation typique
include 'header.php';
include 'menu.php';
</pre>
                <p>En cas d'erreur (fichier non trouvé), un warning est généré mais le script continue.</p>
            </article>

            <article>
                <h3>Require</h3>
                <pre>
// Inclusion obligatoire - stoppe si échec
require 'config.php';

// Utilisation typique
require 'database.php';
require 'auth.php';
</pre>
                <p>En cas d'erreur, une fatal error est générée et le script s'arrête.</p>
            </article>
        </section>

        <section>
            <h2>Variantes _once</h2>
            <p>Les versions <code>include_once</code> et <code>require_once</code> garantissent qu'un fichier n'est inclus qu'une seule fois.</p>
            
            <pre>
// Évite les déclarations multiples
require_once 'fonctions.php';
include_once 'helpers.php';

// Exemple pratique pour les fonctions
function maFonction() {
    require_once 'dependances.php';
    // ...
}
</pre>
            <p>Particulièrement utile pour les fichiers contenant des définitions de fonctions/classes.</p>
        </section>

        <section>
            <h2>Bonnes pratiques d'organisation</h2>
            
            <article>
                <h3>Structure de projet typique</h3>
                <pre>
projet/
├── includes/
│   ├── config.php
│   ├── fonctions.php
│   └── database.php
├── templates/
│   ├── header.php
│   ├── footer.php
│   └── menu.php
└── index.php
</pre>
            </article>

            <article>
                <h3>Conseils d'utilisation</h3>
                <ul>
                    <li>Utilisez <code>require</code> pour les fichiers essentiels</li>
                    <li>Préférez <code>_once</code> pour les définitions</li>
                    <li>Utilisez des chemins relatifs constants (__DIR__)</li>
                    <li>Évitez les inclusions dynamiques (variables)</li>
                    <li>Séparez clairement logique et templates</li>
                </ul>
            </article>
        </section>

        <section>
            <h2>Exemples concrets</h2>
            
            <article>
                <h3>Décomposition d'un site web</h3>
                <pre>
// index.php
&lt;?php
require_once 'includes/config.php';
require_once 'includes/fonctions.php';

include 'templates/header.php';
include 'templates/menu.php';

// Contenu principal
echo "&lt;main&gt;";
include 'pages/accueil.php';
echo "&lt;/main&gt;";

include 'templates/footer.php';
?&gt;
</pre>
            </article>

            <article>
                <h3>Gestion des erreurs</h3>
                <pre>
// Sécuriser une inclusion
$page = 'accueil'; // Valeur par défaut
if (isset($_GET['page']) && file_exists("pages/{$_GET['page']}.php")) {
    $page = $_GET['page'];
}

include "pages/$page.php";
</pre>
            </article>
        </section>

        <section>
            <h2>Exercices pratiques</h2>
            
            <article>
                <h3>Exercice 1 : Système de templates</h3>
                <p>Créer un système de templates avec header, menu, footer et contenu dynamique.</p>
                <pre>
// solution.php
function afficherTemplate($titre, $contenu) {
    require_once 'templates/header.php';
    require_once 'templates/menu.php';
    
    echo "&lt;h1&gt;$titre&lt;/h1&gt;";
    include $contenu;
    
    require_once 'templates/footer.php';
}
</pre>
            </article>

            <article>
                <h3>Exercice 2 : Chargement de composants</h3>
                <p>Créer une fonction pour charger dynamiquement des composants UI.</p>
                <pre>
function chargerComposant($nom, $data = []) {
    $fichier = "components/$nom.php";
    if (file_exists($fichier)) {
        extract($data);
        require $fichier;
    } else {
        echo "&lt;div class='erreur'&gt;Composant $nom introuvable&lt;/div&gt;";
    }
}
</pre>
            </article>
        </section>
    </main>

    <footer>
        <p>Guide d'apprentissage PHP &copy; 2025 | Pour toute question, consultez la <a href="https://www.php.net/docs.php">documentation officielle</a></p>
    </footer>
</body>
</html>